---
description: –ù–∞–ø–∏—Å–∞–Ω–∏–µ unit —Ç–µ—Å—Ç–æ–≤
alwaysApply: false
---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

-   ‚úÖ **Jest** - test runner –∏ assertion library
-   ‚úÖ **@testing-library/react** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
-   ‚úÖ **@testing-library/jest-dom** - –º–∞—Ç—á–µ—Ä—ã –¥–ª—è DOM
-   ‚úÖ **@testing-library/user-event** - —Å–∏–º—É–ª—è—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
npm test

# Watch mode (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
npm run test:watch

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
npm run test:coverage

# –î–ª—è CI/CD
npm run test:ci

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
npm test -- AuthStore.test.ts

```

### –ü–æ–¥—Ö–æ–¥ –∫ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—é

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **–ø—Ä–æ—Å—Ç–æ–µ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π** —á–µ—Ä–µ–∑ `jest.mock()`:

-   ‚úÖ –ú–æ–∫–∏—Ä—É–µ–º **axios** –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤
-   ‚úÖ –ú–æ–∫–∏—Ä—É–µ–º **—Å–µ—Ä–≤–∏—Å—ã** –¥–ª—è —Ç–µ—Å—Ç–æ–≤ stores
-   ‚úÖ –ú–æ–∫–∏—Ä—É–µ–º **–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã** –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ —Ö—É–∫–æ–≤
-   ‚úÖ –ú–æ–∫–∏—Ä—É–µ–º **–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤
-   ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º `jest.fn()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è mock-—Ñ—É–Ω–∫—Ü–∏–π
-   ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º `testHelpers` –¥–ª—è —Ñ–∞–±—Ä–∏–∫ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
-   ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º `renderHook` —Å `wrapper` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤

### üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è **React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —Ö—É–∫–æ–≤ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–µ—Ç–∞–ª—å–Ω—ã–π –≥–∞–π–¥:

üëâ **[@add-unit-tests-react-components-hooks.mdc](./add-unit-tests-react-components-hooks.mdc)**

–≠—Ç–æ—Ç –≥–∞–π–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç:

-   –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å React Testing Library
-   –ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ö—É–∫–æ–≤
-   –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Context API)
-   –ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–∞–±–æ—Ç—ã —Å `renderHook` –∏ `wrapper`
-   –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã
-   –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç—ã —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏ –∏ accessibility

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### jest.config.ts

### jest.setup.ts

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

–ò—Å–ø–æ–ª—å–∑—É–µ–º **co-location** –ø–æ–¥—Ö–æ–¥ - —Ç–µ—Å—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º:

```
src/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ clients/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthClient.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ AuthClient.test.ts
‚îÇ   ‚îú‚îÄ‚îÄ mappers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthMappers.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ AuthMappers.test.ts
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îú‚îÄ‚îÄ AuthService.ts
‚îÇ       ‚îî‚îÄ‚îÄ __tests__/
‚îÇ           ‚îî‚îÄ‚îÄ AuthService.test.ts
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ AuthModel.ts
‚îÇ   ‚îî‚îÄ‚îÄ __tests__/
‚îÇ       ‚îî‚îÄ‚îÄ AuthModel.test.ts
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îú‚îÄ‚îÄ AuthStore.ts
‚îÇ   ‚îî‚îÄ‚îÄ __tests__/
‚îÇ       ‚îî‚îÄ‚îÄ AuthStore.test.ts
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îú‚îÄ‚îÄ AuthProvider.tsx
‚îÇ   ‚îú‚îÄ‚îÄ LoginProvider.tsx
‚îÇ   ‚îî‚îÄ‚îÄ __tests__/
‚îÇ       ‚îú‚îÄ‚îÄ AuthProvider.test.tsx
‚îÇ       ‚îî‚îÄ‚îÄ LoginProvider.test.tsx
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useAjaxMethod.ts
‚îÇ   ‚îî‚îÄ‚îÄ __tests__/
‚îÇ       ‚îî‚îÄ‚îÄ useAjaxMethod.test.tsx
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ validators.ts
‚îÇ   ‚îî‚îÄ‚îÄ __tests__/
‚îÇ       ‚îî‚îÄ‚îÄ validators.test.ts
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îî‚îÄ‚îÄ Button/
‚îÇ       ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ       ‚îî‚îÄ‚îÄ __tests__/
‚îÇ           ‚îî‚îÄ‚îÄ Button.test.tsx
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ Header/
        ‚îú‚îÄ‚îÄ Header.tsx
        ‚îî‚îÄ‚îÄ __tests__/
            ‚îî‚îÄ‚îÄ Header.test.tsx

src/testHelpers/
‚îî‚îÄ‚îÄ AuthHelpers.ts
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ co-location:

-   ‚úÖ –¢–µ—Å—Ç—ã —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º - –ª–µ–≥—á–µ –Ω–∞—Ö–æ–¥–∏—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
-   ‚úÖ –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ª–µ–≥–∫–æ —É–¥–∞–ª–∏—Ç—å –∏ –µ–≥–æ —Ç–µ—Å—Ç—ã
-   ‚úÖ –Ø–≤–Ω–∞—è —Å–≤—è–∑—å –º–µ–∂–¥—É –∫–æ–¥–æ–º –∏ —Ç–µ—Å—Ç–∞–º–∏
-   ‚úÖ –ü—Ä–æ—â–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ IDE

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:

-   `*.test.ts` - –¥–ª—è TypeScript —Ñ–∞–π–ª–æ–≤
-   `*.test.tsx` - –¥–ª—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ö—É–∫–æ–≤
-   `__tests__/` - –ø–∞–ø–∫–∞ –≤—Å–µ–≥–¥–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∞–∫ (Jest –Ω–∞—Ö–æ–¥–∏—Ç —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–æ–µ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ù–∞—à–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–µ–¥—É–µ—Ç **—Å–ª–æ–µ–Ω–æ–º—É –ø–æ–¥—Ö–æ–¥—É** - –∫–∞–∂–¥—ã–π —Å–ª–æ–π —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –º–æ–∫–∏—Ä—É—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∏–∂–Ω–∏—Ö —Å–ª–æ–µ–≤:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          UI Components Layer            ‚îÇ  ‚Üê React Testing Library
‚îÇ         (Button, Dialog, etc.)          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ         Providers/Context Layer         ‚îÇ  ‚Üê –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å renderHook
‚îÇ         AuthProvider.test.tsx           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ            Hooks Layer                  ‚îÇ  ‚Üê –ú–æ–∫–∏—Ä—É–µ–º providers, router
‚îÇ         useAjaxMethod.test.tsx          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ            Stores Layer                 ‚îÇ  ‚Üê –ú–æ–∫–∏—Ä—É–µ–º Services
‚îÇ         AuthStore.test.ts               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ          Services Layer                 ‚îÇ  ‚Üê –ú–æ–∫–∏—Ä—É–µ–º Clients & Mappers
‚îÇ         AuthService.test.ts             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ          Models Layer                   ‚îÇ  ‚Üê MobX –º–æ–¥–µ–ª–∏, computed
‚îÇ         AuthModel.test.ts               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ          Mappers Layer                  ‚îÇ  ‚Üê –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ—Ç –º–æ–∫–æ–≤
‚îÇ         AuthMappers.test.ts             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ          Clients Layer                  ‚îÇ  ‚Üê –ú–æ–∫–∏—Ä—É–µ–º axios
‚îÇ         AuthClient.test.ts              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ          Utils Layer                    ‚îÇ  ‚Üê –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ         validators.test.ts              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —Å–ª–æ—è–º:

-   **–í–æ—Å—Ö–æ–¥—è—â–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ—Ç utils –∫ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
-   **–ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –∫–∞–∂–¥—ã–π —Å–ª–æ–π –º–æ–∫–∏—Ä—É–µ—Ç —Å–ª–æ–π –Ω–∏–∂–µ
-   **–ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤** - –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º (`beforeEach` –æ—á–∏—â–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
-   **–Ø–≤–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ** - —Ç–µ—Å—Ç—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

---

## üìä –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ —Å–ª–æ—è–º

### 1Ô∏è‚É£ Utils Layer

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

-   ‚úÖ –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
-   ‚úÖ –ë–µ–∑ –º–æ–∫–æ–≤
-   ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ unit-—Ç–µ—Å—Ç—ã
-   ‚úÖ –í—ã—Å–æ–∫–∞—è –ø–æ–∫—Ä—ã—Ç–æ—Å—Ç—å –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ—Å—Ç–∞:**

```typescript
describe('validators', () => {
    describe('phone', () => {
        it('–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫—É –¥–ª—è null —Ç–µ–ª–µ—Ñ–æ–Ω–∞', () => {
            const result = validators.phone(null);
            expect(result).toBe('–£–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
        });

        it('–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å undefined –¥–ª—è valid 10-digit phone', () => {
            const result = validators.phone('9001234567');
            expect(result).toBeUndefined();
        });
    });
});
```

**üìñ –ü—Ä–∏–º–µ—Ä:** `src/utils/__tests__/validators.test.ts`

---

### 2Ô∏è‚É£ Clients Layer

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

-   ‚úÖ –ú–æ–∫–∏—Ä—É–µ–º `axios` –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ
-   ‚úÖ –°–æ–∑–¥–∞–µ–º mock instance —Å –º–µ—Ç–æ–¥–∞–º–∏ (`get`, `post`, etc.)
-   ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–æ–≤ API
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—Ç–≤–µ—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫

**–ü–∞—Ç—Ç–µ—Ä–Ω –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è:**

```typescript
jest.mock('axios');
const mockedAxios = axios as jest.Mocked<typeof axios>;

describe('AuthClient', () => {
    let client: AuthClient;
    let mockAxiosInstance: any;

    beforeEach(() => {
        mockAxiosInstance = {
            get: jest.fn(),
            post: jest.fn(),
            put: jest.fn(),
            delete: jest.fn(),
            interceptors: {
                request: {use: jest.fn(), eject: jest.fn()},
                response: {use: jest.fn(), eject: jest.fn()}
            }
        };

        mockedAxios.create.mockReturnValue(mockAxiosInstance);
        client = new AuthClient();
    });

    afterEach(() => {
        jest.clearAllMocks();
    });

    describe('getStatus', () => {
        it('–¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', async () => {
            const mockStatusResponse = {
                id: '123',
                name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
                phone: '+79001234567'
            };

            mockAxiosInstance.get.mockResolvedValue({data: mockStatusResponse});

            const result = await client.getStatus();

            expect(mockAxiosInstance.get).toHaveBeenCalledWith('/status', undefined);
            expect(result.id).toBe('123');
        });

        it('–¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏', async () => {
            const mockError = new Error('Network error');
            mockAxiosInstance.get.mockRejectedValue(mockError);

            await expect(client.getStatus()).rejects.toThrow('Network error');
        });
    });
});
```

**üìñ –ü—Ä–∏–º–µ—Ä:** `src/api/clients/__tests__/AuthClient.test.ts`

---

### 3Ô∏è‚É£ Mappers Layer

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

-   ‚úÖ –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
-   ‚úÖ –ë–µ–∑ –º–æ–∫–æ–≤
-   ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º –º–∞–ø–ø–∏–Ω–≥ –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ (API ‚Üî Models)
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É null-–∑–Ω–∞—á–µ–Ω–∏–π –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

**–ü–∞—Ç—Ç–µ—Ä–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

```typescript
describe('AuthMappers', () => {
    let mapper: AuthMappers;

    beforeEach(() => {
        mapper = new AuthMappers();
    });

    describe('statusResponseToAuthData', () => {
        it('–¥–æ–ª–∂–µ–Ω –º–∞–ø–ø–∏—Ç—å –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç —Å—Ç–∞—Ç—É—Å–∞ –≤ auth data', () => {
            const statusResponse: StatusResponse = {
                id: '123',
                name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
                phone: '+79001234567',
                plan: Plan.PRO
            };

            const result = mapper.statusResponseToAuthData(statusResponse);

            expect(result.id).toBe('123');
            expect(result.name).toBe('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤');
            expect(result.plan).toBe(Plan.PRO);
        });

        it('–¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å null values in status response', () => {
            const statusResponse: StatusResponse = {
                id: null,
                name: null,
                phone: null
            };

            const result = mapper.statusResponseToAuthData(statusResponse);

            expect(result.id).toBeNull();
            expect(result.name).toBeNull();
        });
    });
});
```

**üìñ –ü—Ä–∏–º–µ—Ä:** `src/api/mappers/__tests__/AuthMappers.test.ts`

---

### 4Ô∏è‚É£ Models Layer

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

-   ‚úÖ MobX observable –∫–ª–∞—Å—Å—ã
-   ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º computed properties
-   ‚úÖ –ë–µ–∑ –º–æ–∫–æ–≤ (—á–∏—Å—Ç—ã–µ –∫–ª–∞—Å—Å—ã)
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –±–∞–∑–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

**–ü–∞—Ç—Ç–µ—Ä–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

```typescript
describe('AuthModel', () => {
    describe('AuthData', () => {
        describe('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è', () => {
            it('–¥–æ–ª–∂–µ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏', () => {
                const authData = new AuthData();

                expect(authData.id).toBeNull();
                expect(authData.plan).toBeNull();
                expect(authData.needPhoneVerification).toBe(false);
            });
        });

        describe('Computed: hasSubscription', () => {
            it('–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å false –∫–æ–≥–¥–∞ plan —Ä–∞–≤–µ–Ω null', () => {
                const authData = new AuthData();
                authData.plan = null;

                expect(authData.hasSubscription).toBe(false);
            });

            it('–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å true –∫–æ–≥–¥–∞ plan —Ä–∞–≤–µ–Ω PRO', () => {
                const authData = new AuthData();
                authData.plan = Plan.PRO;

                expect(authData.hasSubscription).toBe(true);
            });
        });
    });

    describe('LoginData', () => {
        describe('–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π', () => {
            it('–¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤—Å–µ –ø–æ–ª—è', () => {
                const loginData = createLoginData({
                    email: 'test@example.com',
                    phone: '+79001234567',
                    password: 'password123'
                });

                expect(loginData.email).toBe('test@example.com');
                expect(loginData.phone).toBe('+79001234567');
            });
        });
    });
});
```

**–ß—Ç–æ –ù–ï —Ç–µ—Å—Ç–∏—Ä—É–µ–º:**

-   ‚ùå MobX —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—ç—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
-   ‚ùå –ë–∞–∑–æ–≤—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–æ–ª–µ–π –±–µ–∑ –ª–æ–≥–∏–∫–∏ (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏)

**üìñ –ü—Ä–∏–º–µ—Ä:** `src/models/__tests__/AuthModel.test.ts`

---

### 5Ô∏è‚É£ Services Layer

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

-   ‚úÖ –ú–æ–∫–∏—Ä—É–µ–º `Clients` –∏ `Mappers`
-   ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—é
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ abort-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

**–ü–∞—Ç—Ç–µ—Ä–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

```typescript
jest.mock('../AuthClient');
jest.mock('../AuthMappers');

describe('AuthService', () => {
    let service: AuthService;
    let mockClient: jest.Mocked<AuthClient>;
    let mockMappers: jest.Mocked<AuthMappers>;

    beforeEach(() => {
        service = new AuthService();
        mockClient = (service as any).client;
        mockMappers = (service as any).mappers;
    });

    describe('getStatus', () => {
        it('–¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∞—Ç—å —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ client –∏ –º–∞–ø–ø–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç', async () => {
            const mockResponse = {id: '123', name: 'Test'};
            const mockAuthData = new AuthData();

            mockClient.getStatus.mockResolvedValue(mockResponse);
            mockMappers.statusResponseToAuthData.mockReturnValue(mockAuthData);

            const result = await service.getStatus();

            expect(mockClient.getStatus).toHaveBeenCalled();
            expect(mockMappers.statusResponseToAuthData).toHaveBeenCalledWith(mockResponse);
            expect(result).toBe(mockAuthData);
        });
    });
});
```

**üìñ –ü—Ä–∏–º–µ—Ä:** `src/services/__tests__/AuthService.test.ts`

---

### 6Ô∏è‚É£ Stores Layer

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

-   ‚úÖ –ú–æ–∫–∏—Ä—É–µ–º `Services` —Ü–µ–ª–∏–∫–æ–º
-   ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∞–±—Ä–∏–∫–∏ –∏–∑ `testHelpers`
-   ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º MobX computed —Å–≤–æ–π—Å—Ç–≤–∞
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü–∞—Ç—Ç–µ—Ä–Ω –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è:**

```typescript
jest.mock('../../api/services/AuthService', () => ({
    AuthService: jest.fn().mockImplementation(() => ({
        getStatus: jest.fn(),
        login: jest.fn(),
        register: jest.fn(),
        logout: jest.fn(),
        sendCode: jest.fn()
    }))
}));

describe('AuthStore', () => {
    let store: AuthStore;
    let mockService: any;

    beforeEach(() => {
        store = new AuthStore();
        mockService = store.service;
    });

    describe('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è', () => {
        it('–¥–æ–ª–∂–µ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é', () => {
            expect(store.authData).toBeNull();
            expect(store.loginData).toBeInstanceOf(LoginData);
            expect(store.showErrors).toBe(false);
        });
    });

    describe('login', () => {
        it('–¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—Ö–æ–¥ —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏', async () => {
            const mockAuthData = createAuthData({
                id: '123',
                name: 'Test User'
            });

            mockService.login.mockResolvedValue(mockAuthData);

            store.loginData.phone = '9001234567';
            store.loginData.password = 'password';

            await store.login();

            expect(mockService.login).toHaveBeenCalled();
            expect(store.authData?.id).toBe('123');
            expect(store.showErrors).toBe(false);
        });
    });
});
```

**üìñ –ü—Ä–∏–º–µ—Ä:** `src/stores/__tests__/AuthStore.test.ts`

---

### 7Ô∏è‚É£ UI Components Layer

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

-   ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º React Testing Library
-   ‚úÖ –ú–æ–∫–∏—Ä—É–µ–º stores –∏ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
-   ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º accessibility

**–ö—Ä–∞—Ç–∫–∏–π –ø—Ä–∏–º–µ—Ä:**

```typescript
import {render, screen} from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import {Button} from '../Button';

describe('Button', () => {
    it('–¥–æ–ª–∂–µ–Ω —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º', () => {
        render(<Button>Click me</Button>);

        expect(screen.getByRole('button', {name: 'Click me'})).toBeInTheDocument();
    });

    it('–¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å onClick –ø—Ä–∏ –∫–ª–∏–∫–µ', async () => {
        const handleClick = jest.fn();
        render(<Button onClick={handleClick}>Click me</Button>);

        await userEvent.click(screen.getByRole('button'));

        expect(handleClick).toHaveBeenCalledTimes(1);
    });
});
```

**üìñ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** –°–º–æ—Ç—Ä–∏—Ç–µ [@add-unit-tests-react-components-hooks.mdc](./add-unit-tests-react-components-hooks.mdc) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

### 8Ô∏è‚É£ Providers/Context Layer

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

-   ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º `renderHook` –∏–∑ `@testing-library/react`
-   ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —á–µ—Ä–µ–∑ —Ö—É–∫–∏
-   ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–µ—Ä–µ–¥–∞—á—É initialData
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–±—Ä–æ—Å –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤–Ω–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

**–ö—Ä–∞—Ç–∫–∏–π –ø—Ä–∏–º–µ—Ä:**

```typescript
import {renderHook} from '@testing-library/react';
import {AuthProvider, useAuthStore} from '../AuthProvider';

describe('AuthProvider', () => {
    it('–¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤–Ω–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞', () => {
        const {result} = renderHook(() => {
            try {
                return useAuthStore();
            } catch (error) {
                return {error: (error as Error).message};
            }
        });

        expect(result.current).toEqual({
            error: 'useAuthStore must be used within a AuthProvider'
        });
    });

    it('–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å store –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞', () => {
        const wrapper = ({children}: {children: React.ReactNode}) => (
            <AuthProvider>{children}</AuthProvider>
        );

        const {result} = renderHook(() => useAuthStore(), {wrapper});

        expect(result.current).toBeDefined();
        expect(result.current).toHaveProperty('authData');
        expect(result.current).toHaveProperty('loginData');
    });

    it('–¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å store —Å initialData', () => {
        const initialData = {id: '789', name: 'Test User'};

        const wrapper = ({children}: {children: React.ReactNode}) => (
            <AuthProvider initialData={initialData}>{children}</AuthProvider>
        );

        const {result} = renderHook(() => useAuthStore(), {wrapper});

        expect(result.current).toBeDefined();
        expect(result.current.authData).toBeDefined();
    });

    it('–¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å store instance –ø—Ä–∏ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–µ', () => {
        const wrapper = ({children}: {children: React.ReactNode}) => (
            <AuthProvider>{children}</AuthProvider>
        );

        const {result, rerender} = renderHook(() => useAuthStore(), {wrapper});
        const firstStore = result.current;

        rerender();

        expect(result.current).toBe(firstStore);
    });
});
```

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º:**

-   ‚úÖ –í—ã–±—Ä–æ—Å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ö—É–∫–∞ –≤–Ω–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
-   ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
-   ‚úÖ –ü–µ—Ä–µ–¥–∞—á—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É initialData
-   ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å instance –º–µ–∂–¥—É —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∞–º–∏
-   ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ö—É–∫–∞–º–∏

**üìñ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** –°–º–æ—Ç—Ä–∏—Ç–µ [@add-unit-tests-react-components-hooks.mdc](./add-unit-tests-react-components-hooks.mdc) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

**üìñ –ü—Ä–∏–º–µ—Ä:** `src/providers/__tests__/AuthProvider.test.tsx`

---

### 9Ô∏è‚É£ Hooks Layer

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**

-   ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º `renderHook` –∏–∑ `@testing-library/react`
-   ‚úÖ –ú–æ–∫–∏—Ä—É–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (providers, router, toast)
-   ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

**–ö—Ä–∞—Ç–∫–∏–π –ø—Ä–∏–º–µ—Ä:**

```typescript
import {renderHook, waitFor} from '@testing-library/react';
import {useAjaxMethod} from '../useAjaxMethod';

// Mock –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
const mockPush = jest.fn();
jest.mock('next/navigation', () => ({
    useRouter: () => ({push: mockPush})
}));

describe('useAjaxMethod', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });

    it('–¥–æ–ª–∂–µ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏', () => {
        const mockMethod = jest.fn().mockResolvedValue('success');
        const {result} = renderHook(() => useAjaxMethod(mockMethod));

        expect(result.current.loading).toBe(false);
        expect(result.current.fetchCount).toBe(0);
    });

    it('–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞', async () => {
        const mockMethod = jest.fn().mockResolvedValue('test-result');
        const {result} = renderHook(() => useAjaxMethod(mockMethod));

        const res = await result.current.method();

        expect(res).toBe('test-result');
    });
});
```

**üìñ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** –°–º–æ—Ç—Ä–∏—Ç–µ [@add-unit-tests-react-components-hooks.mdc](./add-unit-tests-react-components-hooks.mdc) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ö—É–∫–æ–≤ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤

**üìñ –ü—Ä–∏–º–µ—Ä:** `src/hooks/__tests__/useAjaxMethod.test.tsx`

---

## üõ†Ô∏è Test Helpers

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

Test Helpers - —ç—Ç–æ **—Ñ–∞–±—Ä–∏–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö**. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/testHelpers/
‚îú‚îÄ‚îÄ index.ts              # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ñ–∞–±—Ä–∏–∫
‚îú‚îÄ‚îÄ AuthHelpers.ts        # –§–∞–±—Ä–∏–∫–∏ –¥–ª—è Auth –º–æ–¥—É–ª–µ–π
‚îú‚îÄ‚îÄ CalculatorHelpers.ts  # –§–∞–±—Ä–∏–∫–∏ –¥–ª—è Calculator –º–æ–¥—É–ª–µ–π
‚îî‚îÄ‚îÄ ...                   # –î—Ä—É–≥–∏–µ —Ñ–∞–±—Ä–∏–∫–∏ –ø–æ –¥–æ–º–µ–Ω–∞–º
```

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏

#### `createAuthData(overrides?)`

–°–æ–∑–¥–∞–µ—Ç `AuthData` —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

```typescript
import {AuthData} from '@/models';
import {Plan, TrialAvailability} from '@/api/types';

export const createAuthData = (overrides?: Partial<AuthData>): AuthData => {
    const authData = new AuthData();
    authData.id = '123';
    authData.name = '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤';
    authData.phone = '+79001234567';
    authData.plan = Plan.PRO;
    authData.promoAvailable = true;
    authData.trialAvailability = TrialAvailability.AVAILABLE;
    authData.needPhoneVerification = false;
    authData.infoPercent = 100;
    authData.infoStatus = 'FILLED';

    return Object.assign(authData, overrides);
};
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
// –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
const authData = createAuthData();

// –° –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ–ª–µ–π
const customAuthData = createAuthData({
    id: '456',
    name: '–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤',
    plan: Plan.TRIAL
});
```

#### `createLoginData(overrides?)`

–°–æ–∑–¥–∞–µ—Ç `LoginData` —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

```typescript
import {LoginData} from '@/models';
import {RoleTypes} from '@/const';

export const createLoginData = (overrides?: Partial<LoginData>): LoginData => {
    const loginData = new LoginData();
    loginData.phone = '9001234567';
    loginData.password = 'password123';
    loginData.email = 'test@example.com';
    loginData.firstName = '–ò–≤–∞–Ω';
    loginData.lastName = '–ò–≤–∞–Ω–æ–≤';
    loginData.middleName = '–ò–≤–∞–Ω–æ–≤–∏—á';
    loginData.role = RoleTypes.AGENT;

    return Object.assign(loginData, overrides);
};
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
// –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
const loginData = createLoginData();

// –¢–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ç–µ—Å—Ç–∞ –≤—Ö–æ–¥–∞
const simpleLoginData = createLoginData({
    phone: '9991234567',
    password: 'pass123',
    email: null,
    firstName: null
});
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Test Helpers

-   ‚úÖ **DRY** - –Ω–µ –¥—É–±–ª–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
-   ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - —á–µ—Ä–µ–∑ `Partial<T>` –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª—é–±—ã–µ –ø–æ–ª—è
-   ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è** - –æ–¥–Ω–æ –º–µ—Å—Ç–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
-   ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ñ–∞–±—Ä–∏–∫–∏
-   ‚úÖ **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - —Ç–µ—Å—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∫–æ—Ä–æ—á–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ

### –ü—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–±—Ä–∏–∫

1. **–û–¥–∏–Ω —Ñ–∞–π–ª –Ω–∞ –¥–æ–º–µ–Ω** - `AuthHelpers.ts`, `CalculatorHelpers.ts`
2. **Prefix `create`** - –≤—Å–µ —Ñ–∞–±—Ä–∏–∫–∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `create`
3. **Partial overrides** - –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–Ω–∏–º–∞–µ–º `Partial<T>`
4. **–í–∞–ª–∏–¥–Ω—ã–µ –¥–µ—Ñ–æ–ª—Ç—ã** - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏
5. **–≠–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ index** - –≤—Å–µ —Ñ–∞–±—Ä–∏–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ `testHelpers/index.ts`

**üìñ –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä:** `src/testHelpers/AuthHelpers.ts`

---

**–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –º–æ–∫–∏:**

-   ‚úÖ **`@testing-library/jest-dom`** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç—á–µ—Ä—ã –¥–ª—è DOM
-   ‚úÖ **`next/navigation`** - –º–æ–∫–∏ –¥–ª—è Next.js router
-   ‚úÖ **`window.matchMedia`** - –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å–∞–º–∏
-   ‚úÖ **`IntersectionObserver`** - –¥–ª—è lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
-   ‚úÖ **`ResizeObserver`** - –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—â–∏—Ö —Ä–∞–∑–º–µ—Ä—ã

---
